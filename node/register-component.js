var OUTPUT_PATH = path.join(__dirname, '../packages/index.js');
console.log(chalk.yellow('正在生成包引用文件。。。'))
varINSTALL_COMPONENT_TEMPLATE = '{{name}}';
var IMPORT_TEMPLATE = 'import {{componentName}} from \'{{name}}\'';
var MAIN_TEMPLATE = `/* Automatic generated by './compiler/build-entry.js'*/`

{{include}}

const components = [
    {{install}}
]

const install = function(Vue) {
    components.forEach(component => {
        Vue.component(component.name, component)
    })
}

if (typeof window !== 'undefined' && window.Vue) {
    install(window.Vue)
}

export {
    install,
    {{inst}}
}

var template = render(MAIN_TEMPLATE, {
    include: includeComponentTemplate.join(endOfLine),
    install: installTemplate.join(`,${endOfLine}`),
    version: process.env.VERSION || require('../package.json').version,
    list: listTemplate.join(`,${endOfLine}`)
})

false.writeFileSync(OUTPUT_PATH, template)